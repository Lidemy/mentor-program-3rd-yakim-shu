#  [第一週] 作業 hw4：跟你朋友介紹 Git


首先，菜哥你居然如此認真看待笑話，尬歸尬，但眼角還是有點濕濕的。

## 何謂版本控制

使用一個新工具前，要了解為什麼要使用它、用了會帶來什麼好處。

像菜哥你的問題是，同一個笑話可能有 20 個版本，前 19 個版本你不一定會用到，但也想要保留做為備份或參考，假如笑話累積越來越多，有 100 個笑話，這樣等於有 100*20 = 2000 個檔案，想著就頭痛到講不出笑話來了。

所以版本控制的確是可以幫助你保留所有版本，但你可以**只看到最新的檔案版本**，**舊的檔案也還在，只是放在其他位置**，只要得到正確的地址，要隨時回去查看也不是問題。

---

## 版本控制的原理

說明原理這種事情，我辦不到，但可以舉個簡單的例子，模擬 Git 在背後到底做了什麼？

假如一個 `lame_joke` 資料夾，裡面有不同檔案互相有關聯的 `joke_1.txt`, `joke_2.txt`, `joke_3.txt`，當你只改了其中一個檔案，那要怎麼做版本控制呢？

1. 複製單個檔案出來？
    - 但最後會越來越複雜，像剛剛上述的有 2000 個檔案。
2. **還是網頁資料夾都複製出來？**
    - 好像是個不錯的方法，來實做看看。 
        
假設昨天修改了 `joke_1.txt`，那就把原本的資料夾 `lame_joke` 複製一份出來成 `lame_joke_v2`，這樣一個人做板控其實沒有什麼問題，但如果這時候慣老闆跳出來說：「媽的菜哥笑話品質一直下降，明天關關也要一起寫！ 」，變成多人協作的情況呢？

#### 多人協作發生衝突

假設現在跟關關在雲端的空間上都是同步著最新的 `lame_joke_v2`。

你需要修改檔案，所以捉一份下來要改成 `lame_joke_v3`，但旁邊的關關剛好也抓了一份下來修改成 `lame_joke_v3`，**造就了現在有兩份 `lame_joke_v3`，名稱一樣但內容不同的衝突情形。**

所以為了解決這狀況，那就試著把資料夾名稱 `lame_joke_v3`，**轉成 hashes 亂碼** ，假設 hashes 是完全不會重複的，所以菜哥這份的資料夾名稱改成 `eyokend3d28sf`，而關關的則是 `akuebh83ks02d`。

#### 如何識別順序、最新版本，永保辦公室和諧

現在解決了版本號碼衝突的問題，但亂碼無法看出順序關係，該怎麼辦呢？  

不如新增一個 `版本紀錄.txt`，裡面記錄好上傳時間、上傳者、版本號碼：
- `4/15 08:00`, `菜哥`, `eyokend3d28sf`
- `4/15 08:05`, `關關`, `akuebh83ks02d`

檔案隨著時間越來越大，不好看出最新的版本怎麼辦，再新增一個 `最新版本.txt`：
- new: `akuebh83ks02d`

#### 不用做版本控制的檔案

有些檔案確定不會變動，像是**電腦設定檔、 log 檔、或者是你覺得沒有必要做版控的檔案**，例如剛剛管理版本號碼的文件，那要怎麼做勒？很簡單，移出資料夾就就好了。所以我們最後的版本控制目錄會變成：

- `最新版本.txt`
- `版本紀錄.txt`
- 有用版本控制的檔案
    - `eyokend3d28sf/`
        - `joke_1.txt, joke_2.txt, joke_3.txt`
    - `akuebh83ks02d/`
        - `joke_1.txt, joke_2.txt, joke_3.txt`

( 這兩個檔案只是拿來舉例 )    
    
#### 最陽春的版本控制系統就完成啦

沒錯，這樣就是版本控制的雛形拉，原理沒有很複雜吧。

---

## 好！正式進入 Git

接下來的操作需要其他的背景知識，如果菜哥跟 h0w 哥一樣、不知道怎麼用 command line 的話，請先大概看過這篇文章：[[第一週] Command Line - Terminal、基本指令介紹](https://yakimhsu.com/project/project_w1_CommandLine.html)

( 欸 不准跳過啊！ )

在得到使用 CLI 的基本知識後，正式開始管理笑話囉

1. 在桌面開一個 lame_joke 資料夾 ： `mkdir lame_joke`
2. 把桌面的笑話檔案拉進去 lame_joke 資料夾： `mv joke1.txt lame_joke`
3. 進入 lame_joke 資料夾： `cd lame_joke`
4. 初始化 Git ： `git init`
    - 此步驟代表你正式進入 Git 的奇幻世界 
5. 建立檔案 ： `touch .gitignore`
    - 可以把不需要版本控制的檔案、列在 `.gitignore` 這個檔案裡
    - 例如：裡面有一張菜哥你的自拍照，不需要加入版控
    - 那就將自拍照的檔案寫進去 `.gitignore` ： `echo "selfie.jpg" > .gitignore`
6. 將其他所有的檔案加入追蹤區： `git add .` 
    - 此時除了 `selfie.jpg`，其他的檔案都有在版本控制的監控中
7. 當菜哥調整完笑話，覺得是時候存成新的版本時
    - 儲存成一個新版本： `git commit -am "任何你想留的版本文字"`
8. 查看你的版本紀錄 ： `git log`
    - 可以看到 commit 過的版本紀錄

### 切換笑話版本

到這邊其實就差不多了，如果菜哥想回復成以前的版本，可以輸入：`git checkout <hashes>`

`<hashes>` 指的是你的版本號碼，還記得剛剛用 `git log` 查看歷史紀錄嗎？

![](https://i.imgur.com/wZxqf1c.jpg)

那一串超爆長的數字+英文就是了。（不過可以只寫前 7 碼）

想再切回最新的版本就輸入 `git checkout master`

---

### 想要更進階的改造笑話嗎？

剛剛上述的都是最基本的功能，處於線性的開發流程，每次 commit 的**新版本都是基於上一個版本的修改**，這樣單人作業的時候可能不會有太大問題，但當多人協作、或同時要開發不同功能時，可能就會有衝突產生。

意思是哪天菜哥的事業越做越大，要跟別人共筆你的 `lame_joke`（ 我是不信啦 ），我還有更厲害的東西可以教你。

## branch 分支

那東西就叫 `branch` 分支， branch 的作用是讓開發過程各自獨立、簡單一點。`開發新笑話` 獨立出來變成支線，才不會跟你寫好的笑話混在一起，別人也不會看到你寫到一半未完成的笑話。

所以可以動手新增一個 branch ： `git branch new_joke`
等寫完新笑話，想要合併回原本的 master 上，要記得先切回 master： `git checkout master` ，然後再把寫好的笑話分支合併回來： `git merge new_joke`

---

## 加碼，成為世界笑話大師的第一步

讓全世界的人來共同編輯你的笑話，聽起來是不是很棒啊！

哪天菜哥的事業越做越大，別人發現你的 `lame_joke` 真的有夠 lame ，忍不住也想貢獻一下，有個網站叫 GitHub，你也可以利用這網站壯大 `lame_joke` 的版圖喔。

該怎麼做勒？先去 [GitHub](https://github.com) 申請你的帳號密碼，成功之後新建一個 repository，你可以把它想像成是這個網站提供的雲端倉庫，因為是免費的，所以大家都看得到。

新建完 repository ，會看到頁面有個簡單教學，我們就複製中間的那兩行程式碼。

![](https://i.imgur.com/4cdUTid.jpg)

貼到剛剛的 Terminal 裡，輸入完讓他跑一下，重整一下網站頁面，應該就可以成功看到檔案囉！

### 被 Diss 了吧

當別人有心要奉獻新笑話的時候，他可能會送一個 pull request，什麼意思呢？

等於是說別人把你的專案 fork  下來，開一條新的 branch 做編輯，等他完成後、覺得自己的笑話比你 lame 一百倍，他就會發一條 request ，要求合併到你的 master 上面。

你覺得這笑話夠 lame ，就可以同意合併，這麼一來就達到共同編輯的效果啦！

因為被 Diss 、菜哥好勝心整個被激起，決心把更新過的遠端檔案拉下來： `git pull origin master` ，成為世界笑話大師又更近了一步。





